<% if simple_current_order.item_count > 0 %>
  <% 
      text = text ? h(text) : Spree.t('cart')
      css_class = nil

      if simple_current_order.nil? or simple_current_order.item_count.zero?
        text = "<span class='glyphicon glyphicon-shopping-cart'></span> #{text}: (#{Spree.t('empty')})"
        css_class = 'empty'
      else
        text = "<span class='glyphicon glyphicon-shopping-cart'></span> #{text}: (#{simple_current_order.item_count})  <span class='amount'>#{simple_current_order.display_total.to_html}</span>"
        css_class = 'full'
      end
  %>
  <%= link_to spree.cart_path, :class => "cart-info #{css_class}" do %>
    <%= text.html_safe %>
  <% end %>
  <div class="gm-order-info-popup">
    <%= render 'spree/orders/simple_order_form' %>
    <div>
      <%= link_to "Proceed to checkout", spree.checkout_state_path(simple_current_order.checkout_steps.first), class: 'btn btn-primary proceed-button' %>
    </div>
  </div>
<% end %>
