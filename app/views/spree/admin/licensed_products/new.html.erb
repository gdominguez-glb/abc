<%= render :partial => 'spree/admin/shared/error_messages', :locals => { :target => @new_licenses_form } %>

<% content_for :page_title do %>
  <%= Spree.t(:new_license) %>
<% end %>

<%= form_for @new_licenses_form, url: spree.admin_licensed_products_path, :html => { :multipart => true } do |f| %>
  <fieldset data-hook="new_license">
    <div data-hook="admin_licensed_product_form_user_id" class="form-group">
      <label>Select school district admin</label>
      <%= f.text_field :user_id, class: 'form-control' %>
    </div>
    <div data-hook="admin_licensed_product_form_email" class="form-group">
      <label>Or enter email of school district</label>
      <%= f.text_field :email, class: 'form-control' %>
    </div>
    <div data-hook="admin_licensed_product_form_product_id" class="form-group">
      <label>Select products</label>
      <%= f.hidden_field :product_ids %>
    </div>
    <div data-hook="admin_licensed_product_form_fulfillment_at" class="form-group">
      <label>Fulfillment At</label>
      <%= f.text_field :fulfillment_at, value: datepicker_field_value((Date.parse(@new_licenses_form.fulfillment_at) rescue nil)), class: 'datepicker form-control' %>
      <p class="help-block">License will be fulfillment immediately if leave blank</p>
    </div>
    <div data-hook="admin_licensed_product_form_quantity" class="form-group">
      <label>Quanity</label>
      <%= f.text_field :quantity, class: 'form-control' %>
    </div>

    <div class="form-group">
      <label>Salesforce Order ID</label>
      <%= f.text_field :salesforce_order_id, class: 'form-control' %>
    </div>

    <div class="form-group">
      <label>Salesforce Account ID</label>
      <%= f.text_field :salesforce_account_id, class: 'form-control' %>
    </div>

    <div class="form-group">
      <label>Amount</label>
      <%= f.text_field :amount, class: 'form-control' %>
    </div>

    <div class="form-group">
      <label>Payment Method</label>
      <%= f.collection_select :payment_method_id, Spree::PaymentMethod.available(:back_end), :id, :name, { include_blank: 'Select Payment Method' }, class: 'form-control' %>
    </div>
    
    <ul class="nav" id="payment-methods" data-hook>
      <% Spree::PaymentMethod.available(:back_end).each do |method| %>
        <li id="payment_method_<%= method.id %>" class="payment-method" style="display: none;">
          <fieldset>
            <%= render :partial => "spree/checkout/payment/#{method.method_type}", :locals => { :payment_method => method } %>
          </fieldset>
        </li>
      <% end %>
    </ul>

    <%= render :partial => 'spree/admin/shared/new_resource_links' %>
  </fieldset>
<% end %>
<%= render 'form_js' %>
