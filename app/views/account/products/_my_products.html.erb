<% @my_products.map{ |p| p.parts.exists? ? p.parts : p }.flatten.uniq.each do |product| %>
  <%= render partial: 'product_item', locals: { product: product } %>
<% end %>
