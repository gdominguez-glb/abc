<% content_for :body_class, "licenses" %>

<div class="row">
  <div class="col-sm-10 col-sm-offset-1">

    <%= render 'tabs' %>

    <%= form_for @assign_licenses_form, url: assign_account_licenses_path do |f| %>
      <div class="page-header margin-top-xl">
        <h2 class="margin-bottom-m">Ready to assign some licenses...</h2>
        <p class="lead margin-bottom-m">Assign one or more licenses to anyone you want</p>
      </div>
      <% if @assign_licenses_form.errors.count > 0 %>
        <div id="error_explanation" class="alert alert-danger">
          <p>
            OH NO, <%= pluralize(@assign_licenses_form.errors.count, "error") %> prohibited this user from being saved:
          </p>
          <ul>
            <% @assign_licenses_form.errors.full_messages.each do |msg| %>
              <li> <%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      <%= render 'stats' %>

      <div class="row">
        <div class="col-sm-4 border-right-primary">
          <h4 class="margin-bottom-reset">Step 1.</h4>
          <small class="margin-bottom block"><em>Select product you'd like to assign*</em></small>
        </div>
        <div class="col-sm-4">
          <h4 class="margin-bottom-reset">Step 2.</h4>
          <small class="margin-bottom block"><em>Select users you'd like to assign</em></small>
        </div>
        <div class="col-sm-4 border-left-primary">
          <h4 class="margin-bottom-reset">Step 3.</h4>
          <small class="margin-bottom block"><em>Select the quantity of licenses to assign</em></small>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-6 col-md-4">
          <label for="">Select from Existing Users</label>
          <%= link_to 'Choose Users', select_users_account_licenses_path, class: 'btn btn-primary btn-block margin-bottom', remote: true %>
        </div>
        <div class="col-sm-6 col-md-4 col-md-offset-2">
          <label for="">Upload from File</label>
          <%= link_to import_modal_account_licenses_path, class: 'btn btn-default btn-block upload-user-btn dashed-border margin-bottom', remote: true do %>
            Choose File <span class="glyphicon glyphicon-plus"></span>
          <% end %>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <%= f.text_field :licenses_recipients, class: 'form-control', placeholder: 'separate emails with comma' %>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="form-group margin-bottom-s">
            <label for="">Number of Licenses</label>
            <%= f.text_field :licenses_number, class: 'form-control', placeholder: 'licenses number' %>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="">Total License(s) Assigned</label>
            <%= f.text_field :total, class: 'form-control', readonly: true %>
          </div>
        </div>
      </div>
      <div class="row text-center license-actions">
        <div class="col-sm-6 col-md-4">
          <%= f.submit 'Assign License(s)', class: 'btn btn-success btn-block margin-bottom-s', data: { disable_with: 'Saving' } %>
        </div>
        <div class="col-sm-6 col-md-2">
          <button class="btn btn-danger btn-block">Cancel</button>
        </div>
      </div>
    <% end %>

  </div>
</div>

<%= content_for :javascripts do %>
  <%= render 'assign_form_js' %>
<% end %>
