var emails = <%= raw @emails.to_json %>;

// Get emails from hidden license recipients input
$('#assign_licenses_form_licenses_recipients').val(emails.join(','));

if (emails.length > 0) {
  // Reveal the checkbox in step 2
  $('.js-step-2 .hide').removeClass('hide');

  // Update the button text in step 2
  $('#show-add-users-modal-btn').text('Edit Users');

  // Show the success message
  $('.js-step-2 .js-success-message').removeClass('hide');
  $('.js-step-2 .js-number-total').text(emails.length);
  if (emails.length > 1) {
    $('.js-step-2 .js-success-message').append('s');
  }

  // Add the email total to the "Number of Users" box in step 3
  $('#assign_licenses_form_total').val(emails.length);

  // Get the total quantity from the input in step 3
  var licenseCount = $('#assign_licenses_form_licenses_number').val();

  // Update the total license count in step 3
  $('#licenseTotal').text(emails.length * licenseCount);

  // Enable the "Assign Licenses" button
  $('#btnAssignLicenses').removeClass('disabled');

  // Make the "Number of Users" box in step 3 green
  $('#assign_licenses_form_total').addClass('success');
}
// Hide the modal
$('#select-users-modal').modal('hide');
