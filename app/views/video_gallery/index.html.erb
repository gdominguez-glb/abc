<%= content_for :body_class, 'without-subnav' if current_spree_user.blank? %>
<div class="wrapper">
  <div class="fixed-sidebar left responsive-sidebar video-gallery-sidenav">
    <%= form_tag '', method: :get, class: 'side-search-form' do %>
      <% params[:taxon_ids].each do |taxon_id| %>
        <%= hidden_field_tag "taxon_ids[]", taxon_id %>
      <% end %>
      <div class="form-group">
        <%= text_field_tag :query, params[:query], class: 'form-control header-form-control', placeholder: 'Search' %>
      </div>
    <% end %>
    <div class="taxonomies-filters">
      <%= render 'taxonomies' %>
    </div>
  </div>
  <div class="videos-wrapper clearfix">
    <div class="content sidebar-left responsive-sidebar">
      <% if @videos.blank? %>
        <div class="video-empty-state">
          <h1>Uh Oh!</h1>
          <h3>We couldn't find any videos for you</h3>
          <h3>Please search again</h3>
        </div>
      <% else %>
        <% @videos.each do |video| %>
          <%= render partial: 'video', locals: { video: video } %>
        <% end %>
      <% end %>
    </div>
  </div>
  <%= content_for :javascripts do %>
    <%= javascript_tag do %>
      $(function() {
        $(".taxonomy-wrapper .taxonomy-root").click(function() {
          var filter_container = $(this).parents('.taxonomy-wrapper');
          filter_container.find('.list-group').toggleClass("show-menu");
        })
      });
    <% end %>
  <% end %>
</div>
